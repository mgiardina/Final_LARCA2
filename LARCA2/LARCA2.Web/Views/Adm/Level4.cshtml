@model Larca2.Models.Level4SearchForm
@{
    ViewBag.Title = "Modificación de Level 4";
}
@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title.</h1>
                <h2>@ViewBag.Message</h2>
            </hgroup>
            <p>
                This screen allows the visualization, modification and deletion of level 4 in the system.
            </p>
        </div>
    </section>
}


<script>


    $(document).ready(function () {
        var ListIdRenglon;
        $('#Descripcion_nivel3').click(function () {

            $(this).find('#option').hide();

        });

        $('#Descripcion_nivel3').on('change', function () {

            ListIdRenglon = this.value;


            document.getElementById("SelectNivel").style.display = 'none';
            document.getElementById('txtNivel').value = ListIdRenglon;


        });

        $('#btnBusca').on('click', function () {

            if (document.getElementById('txtNivel').value == "") {

                document.getElementById("SelectNivel").style.display = "";
                return false;
            }
        });

        $('#Nuevo').on('click', function () {

            var url = '@Url.Action("NuevoLevel4", "Adm", new {Id =  "IdRenglon"})';


            if (document.getElementById('txtNivel').value == "") {

                document.getElementById("SelectNivelAgregar").style.display = "";
                return false;
            }

            window.location.href = url.replace('IdRenglon', ListIdRenglon);

        });





        $('#Modificar').on('click', function () {

            var IdRenglon;
            var rowCount = $('.table tr').length;
            var value = $('input:checked').val();
            var CheckedCount = $('input:checked').length;


            $('.txtIdRenglon').val(value);


            if (rowCount == 1) {

                document.getElementById("Seleccionar").style.display = "";
                return false;
            }
            else {

                if (CheckedCount > 1) {
                    document.getElementById("Check2").style.display = 'none';
                    document.getElementById("Check1").style.display = "";

                    return false;
                }

                if (CheckedCount < 1) {
                    document.getElementById("Check1").style.display = 'none';
                    document.getElementById("Check2").style.display = "";
                    return false;
                }
            }

        });

    });

</script>

<div class="container-fluid">
    @using (Html.BeginForm("ModifLevel4", "Adm", FormMethod.Post, new { name = "myform"}))
    {
        <div class="row">
            <div class="col-sm-13">
                <h5 style="border-bottom:1px solid #c7d1d6;">FILTRO</h5>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <label>Descripción Nivel 3</label><br />

                <select id="Descripcion_nivel3" class="contro">
                    @if (Model != null)
                    {
                        if (Model.Level4List != null)
                        {

                            <option id="option">Buscar...</option>

                            foreach (LARCA2.Data.DatabaseModels.LARCA20_RcClasification RcClasification in Model.Level3List)
                            {
                                <option value="@RcClasification.Id">@RcClasification.Description</option>
                       

                            }

                        }

                        else
                        {
                            <option id="option">Buscar...</option>

                            foreach (LARCA2.Data.DatabaseModels.LARCA20_RcClasification RcClasification in Model.Level3List)
                            {
                                <option value="@RcClasification.Id">@RcClasification.Description</option>

                            }

                        }
                    }
                </select>

                <input type="hidden" id="txtNivel" name="txtNivel" value="" />
                <input type="hidden" class="txtIdRenglon" id="txtIdRenglon" name="txtIdRenglon" value="" />


            </div>

            <div class="col-sm-10">
                <br style="margin-bottom:3px;" />
                <button type="submit" id="btnBusca" class="btn btn-info" formaction="Level4">Buscar</button>
                <br style="margin-bottom:3px;" />
                <br style="margin-bottom:3px;" />
                <div id="SelectNivel" style="color:red;display:none">Seleccione un Nivel para Modificar</div>
                <div id="SelectNivelAgregar" style="color:red;display:none">Seleccione un Nivel del Filtro para Agregar</div>
               
            </div>
        </div>
        <div class="row">
            <br style="margin-bottom:3px;" />
            <div class="col-sm-4" id="Seleccionar" style="color:red;display:none">Ingrese un Filtro para la búsqueda</div>
            <div class="col-sm-4" id="Check1" style="color:red;display:none">Seleccione solamente una Descripción de Nivel 3 para Modificar</div>
            <div class="col-sm-4" id="Check2" style="color:red;display:none">Seleccione una Descripción de Nivel 3 para Modificar</div>
            <div class="col-sm-13 pull-right">
                <h5 style="border-bottom:1px solid #c7d1d6;">OPERACIONES</h5>
            </div>
        </div>
        <div class="row">
            <div class="pull-right col">
                <input type="button" value="Nuevo" name="Nuevo" id="Nuevo" class="btn btn-default" />
                <input type="submit" value="Modificar" name="Modificar" id="Modificar" class="btn btn-default" />
            </div>
        </div>
        <div class="row">
            <div class="col-sm-13">
                <div class="table-responsive">
                    <table class="table">
                        <tr>
                            <th width="10%" align="center"></th>
                            <th width="20%" align="center">
                                <label>Descripción</label>
                            </th>
                        </tr>

                        @{int j = 0;

                        if (Model.Level4List != null)
                        {
                            if (Model.filterlimit != null && Model.filterlimit != 0)
                            {

                                @*for (int i = 0; i < Model.filterlimit; i++)
                                {
                                    <tr id="tr">
                                        <td width="10%" align="center">
                                            @Html.CheckBoxFor(m => m.Selected[j], new { @value = Model.Level4List[i].Id })
                                        </td>
                                        <td width="20%" align="center">
                                            <label>
                                                @Model.Level4List[i].Nombre
                                            </label>
                                        </td>
                                    </tr>
                                }*@

    var x = 0;
        foreach (LARCA2.Data.DatabaseModels.LARCA20_Level4 Level4 in Model.Level4List)
        {
            if (x < Model.filterlimit) 
            {              
             <tr id="tr">
                <td width="10%" align="center">
                    @Html.CheckBoxFor(m => m.Selected[j], new { @value = Level4.Id })
                </td>
                <td width="20%" align="center">
                    <label>
                        @Level4.name
                    </label>
                </td>
            </tr>
            j++;
            x++;
               }
        }

                            }
                            else
                            {
                                @*var x = 0;
                                foreach (LARCA2.Data.DatabaseModels.LARCA20_Level4 Level4 in Model.Level4List)
                                {

                                    <tr id="tr">
                                        <td width="10%" align="center">
                                            @Html.CheckBoxFor(m => m.Selected[j], new { @value = Level4.Id })
                                        </td>
                                        <td width="20%" align="center">
                                            <label>
                                                @Level4.Nombre
                                            </label>
                                        </td>
                                    </tr>
                                    j++;
                                    x++;
                                    //    }
                                }*@
                            }
                        }
                        }

                    </table>


                </div>
            </div>
        </div>
    }
</div>